import { Lauréat } from '@potentiel-domain/projet';
import { DossierAccessor } from '../../graphql';

type GetNatureDeLExploitationProps<TDossier extends Record<string, string>> = {
  accessor: DossierAccessor<TDossier>;
  nomChampType: keyof TDossier;
  nomChampTaux: keyof TDossier;
};

export const getNatureDeLExploitation = <TDossier extends Record<string, string>>({
  accessor,
  nomChampType,
  nomChampTaux,
}: GetNatureDeLExploitationProps<TDossier>) => {
  const type = accessor.getStringValue(nomChampType);
  const taux = accessor.getDateValue(nomChampTaux);

  if (type) {
    return {
      type: Lauréat.NatureDeLExploitation.TypeDeNatureDeLExploitation.convertirEnValueType(
        type,
      ).formatter(),
      taux,
    };
  }
};
