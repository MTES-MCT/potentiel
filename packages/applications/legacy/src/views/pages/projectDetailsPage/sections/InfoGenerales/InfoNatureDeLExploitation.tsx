import React from 'react';

import { Heading3, Link } from '../../../../components';
import { match } from 'ts-pattern';

import { Lauréat } from '@potentiel-domain/projet';
import { GetNatureDeLExploitationForProjectPage } from '../../../../../controllers/project/getProjectPage/_utils';

export type InfoNatureDeLExploitationProps = {
  natureDeLExploitation: GetNatureDeLExploitationForProjectPage;
};

export const InfoNatureDeLExploitation = ({
  natureDeLExploitation,
}: InfoNatureDeLExploitationProps) => {
  return (
    <div className="flex flex-col gap-0">
      <Heading3 className="m-0">Nature de l'exploitation</Heading3>
      <span>
        {getNatureDeLExploitationTypeLabel(natureDeLExploitation.natureDeLExploitation.type) ||
          'Non renseigné'}
      </span>
      {natureDeLExploitation.affichage && (
        <Link
          href={natureDeLExploitation.affichage.url}
          aria-label={natureDeLExploitation.affichage.label}
        >
          {natureDeLExploitation.affichage.label}
        </Link>
      )}
    </div>
  );
};

// duplicata du packages/applications/ssr/src/app/_helpers/getNatureDeLExploitationTypeLabel.ts
export const getNatureDeLExploitationTypeLabel = (
  type: Lauréat.NatureDeLExploitation.TypeDeNatureDeLExploitation.RawType,
): string =>
  match(type)
    .with('vente-avec-injection-du-surplus', () => 'Vente avec injection du surplus')
    .with('vente-avec-injection-en-totalité', () => 'Vente avec injection en totalité')
    .exhaustive();
