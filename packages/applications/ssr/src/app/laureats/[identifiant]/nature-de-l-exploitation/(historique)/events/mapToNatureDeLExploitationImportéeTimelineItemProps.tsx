import { Lauréat } from '@potentiel-domain/projet';

import { getNatureDeLExploitationTypeLabel } from '@/app/_helpers/getNatureDeLExploitationTypeLabel';
import { TimelineItemProps } from '@/components/organisms/timeline';

export const mapToNatureDeLExploitationImportéeTimelineItemProps = (
  event: Lauréat.NatureDeLExploitation.NatureDeLExploitationImportéeEvent,
): TimelineItemProps => {
  const { importéeLe, typeNatureDeLExploitation, tauxPrévisionnelACI } = event.payload;
  return {
    date: importéeLe,
    title: (
      <>
        Candidature :{' '}
        {
          <div className="flex flex-col gap-2">
            <div>
              Nature de l'exploitation :{' '}
              <span className="font-semibold">
                {getNatureDeLExploitationTypeLabel(typeNatureDeLExploitation)}
              </span>
            </div>
            {tauxPrévisionnelACI ? (
              <div>
                Taux d'autoconsommation individuelle prévisionnel :{' '}
                <span className="font-semibold">{tauxPrévisionnelACI} %</span>
              </div>
            ) : null}
          </div>
        }
      </>
    ),
  };
};
