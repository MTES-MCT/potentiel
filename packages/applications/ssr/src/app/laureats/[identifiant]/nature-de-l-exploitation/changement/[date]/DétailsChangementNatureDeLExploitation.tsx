import { FC } from 'react';

import { DétailsChangement } from '@/components/organisms/demande/DétailsChangement';

import { getNatureDeLExploitationTypeLabel } from '../../../../../_helpers/getNatureDeLExploitationTypeLabel';

import { DétailsNatureDeLExploitationPageProps } from './DétailsChangementNatureDeLExploitation.page';

export type DétailsChangementNatureDeLExploitationProps = {
  changement: DétailsNatureDeLExploitationPageProps['changement'];
};

export const DétailsChangementNatureDeLExploitation: FC<
  DétailsChangementNatureDeLExploitationProps
> = ({ changement }) => {
  return (
    <DétailsChangement
      title="Changement de nature de l'exploitation"
      changement={changement}
      valeurs={<DétailsValeursNatureDeLExploitation changement={changement} />}
      statut="information-enregistrée"
    />
  );
};

type DétailsValeursNatureDeLExploitationProps = {
  changement: DétailsNatureDeLExploitationPageProps['changement'];
};

const DétailsValeursNatureDeLExploitation: FC<DétailsValeursNatureDeLExploitationProps> = ({
  changement,
}) => (
  <>
    <div>
      <span className="font-medium">Nouveau type de nature de l'exploitation</span>:{' '}
      {getNatureDeLExploitationTypeLabel(changement.typeNatureDeLExploitation)}
    </div>
    {changement.tauxPrévisionnelACI !== undefined && (
      <div>
        <span className="font-medium">
          Nouveau taux d'autoconsommation individuelle prévisionnel
        </span>
        : {changement.tauxPrévisionnelACI}
      </div>
    )}
  </>
);
