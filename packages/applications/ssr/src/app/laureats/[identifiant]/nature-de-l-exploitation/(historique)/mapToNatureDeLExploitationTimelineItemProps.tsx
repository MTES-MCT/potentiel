import { match } from 'ts-pattern';

import { Lauréat } from '@potentiel-domain/projet';

import { TimelineItemProps } from '@/components/organisms/timeline';

import {
  mapToNatureDeLExploitationImportéeTimelineItemProps,
  mapToNatureDeLExploitationModifiéeTimelineItemsProps,
} from './events';
import { mapToChangementEnregistréTimelineItemsProps } from './events/mapToChangementEnregistré';

type MapToNatureDeLExploitationTimelineItemProps = (
  readmodel: Lauréat.NatureDeLExploitation.HistoriqueNatureDeLExploitationProjetListItemReadModel,
) => TimelineItemProps;

export const mapToNatureDeLExploitationTimelineItemProps: MapToNatureDeLExploitationTimelineItemProps =
  (readmodel) =>
    match(readmodel)
      .with({ type: 'NatureDeLExploitationImportée-V1' }, (readmodel) =>
        mapToNatureDeLExploitationImportéeTimelineItemProps(readmodel),
      )
      .with({ type: 'NatureDeLExploitationModifiée-V1' }, (readmodel) =>
        mapToNatureDeLExploitationModifiéeTimelineItemsProps(readmodel),
      )
      .with({ type: 'ChangementNatureDeLExploitationEnregistré-V1' }, (readmodel) =>
        mapToChangementEnregistréTimelineItemsProps(readmodel),
      )
      .exhaustive();
