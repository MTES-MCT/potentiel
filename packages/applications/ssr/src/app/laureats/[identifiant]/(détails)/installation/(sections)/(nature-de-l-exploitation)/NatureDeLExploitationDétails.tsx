import { PlainType } from '@potentiel-domain/core';
import { Lauréat } from '@potentiel-domain/projet';

import { TertiaryLink } from '@/components/atoms/form/TertiaryLink';

import { ChampAvecAction } from '../../../../_helpers/types';
import { getNatureDeLExploitationTypeLabel } from '../../../../../../_helpers/getNatureDeLExploitationTypeLabel';

export type NatureDeLExploitationDétailsProps = ChampAvecAction<
  PlainType<Lauréat.NatureDeLExploitation.ConsulterNatureDeLExploitationReadModel>
>;

export const NatureDeLExploitationDétails = ({
  value,
  action,
}: NatureDeLExploitationDétailsProps) => (
  <>
    {value ? (
      <div className="flex flex-col">
        <span>
          {getNatureDeLExploitationTypeLabel(
            value.natureDeLExploitation.typeNatureDeLExploitation.type,
          ) || 'Non renseigné'}
        </span>
        {value.natureDeLExploitation.tauxPrévisionnelACI !== undefined ? (
          <span>
            Taux d'autoconsommation individuelle prévisionnel :{' '}
            {value.natureDeLExploitation.tauxPrévisionnelACI} %
          </span>
        ) : null}
      </div>
    ) : (
      <div>Champs non renseigné</div>
    )}
    {action && <TertiaryLink href={action.url}>{action.label}</TertiaryLink>}
  </>
);
