import { PlainType } from '@potentiel-domain/core';
import { Lauréat } from '@potentiel-domain/projet';

import { TertiaryLink } from '@/components/atoms/form/TertiaryLink';
import { getNatureDeLExploitationTypeLabel } from '@/app/_helpers/getNatureDeLExploitationTypeLabel';
import { ChampAvecAction } from '@/app/laureats/[identifiant]/_helpers/types';

import { Champ } from '../../../(components)/Champ';

export type NatureDeLExploitationDétailsProps = ChampAvecAction<
  PlainType<Lauréat.NatureDeLExploitation.ConsulterNatureDeLExploitationReadModel>
>;

export const NatureDeLExploitationDétails = ({
  value,
  action,
}: NatureDeLExploitationDétailsProps) => (
  <>
    {value ? (
      <div className="flex flex-col">
        <span>
          {getNatureDeLExploitationTypeLabel(
            value.natureDeLExploitation.typeNatureDeLExploitation.type,
          ) || 'Non renseigné'}
        </span>
        {value.natureDeLExploitation.tauxPrévisionnelACI !== undefined && (
          <Champ
            label="Taux d'autoconsommation individuelle prévisionnel"
            number={value.natureDeLExploitation.tauxPrévisionnelACI}
            unité="%"
          />
        )}
      </div>
    ) : (
      <div>Champ non renseigné</div>
    )}
    {action && <TertiaryLink href={action.url}>{action.label}</TertiaryLink>}
  </>
);
